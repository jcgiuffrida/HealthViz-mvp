{% extends "layout.html" %}

{% block content %}

{% include "geo/layout_geo.html" %}
{% load staticfiles %}
{% load humanize %}
<link rel="stylesheet" type="text/css" href="{% static 'home/content/datatables.min.css' %}" />

<ol class="breadcrumb">
  <li><a href="{% url 'home' %}">Home</a></li>
  <li><a href="{% url 'geo:index' %}">Geographies</a></li>
  <li><a href="{% url 'geo:list' type.slug %}">{{ type }}</a></li>
  <li class="active">{{ geography }}</li>
</ol>

<div class="row">
  <div class="col-md-8">
    <h2>{{ geography }}</h2>
    {% if geography.special_area %}
    <h2><small>{{ geography.special_area_name }}</small></h2>
    {% endif %}

    {% if data %}
    <table id="all_attrs" class="table table-striped table-hover table-condensed" cellspacing="0" width="100%">
    <thead>
      <tr>
        <th>Key</th>
        <th>Name</th>
        <th>Period</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      {% for d in data %}
        <tr>
          <td>{{ d.attribute.key }}</td>
          <td><a href="{% url 'attributes:attribute_detail' d.attribute.id %}">{{ d.attribute.parent.name }}{% if d.attribute.parent.units %} ({{ d.attribute.parent.units }}){% endif %}</a></td>
          <td>{{ d.attribute.parent.period }}</td>
          <td>{{ d.value|floatformat:2 }}</td>
        </tr>
      {% endfor %}
    </tbody>
    </table>
    {% else %}
        <p>No attributes are available.</p>
    {% endif %}
  </div>
  {% if regions %}
  <div class="col-md-4">
    <h4>Regions that include {{ geography }}</h4>
    <ul class="list-group">
    {% for region in regions %}
      <a class="list-group-item" href="{% url 'geo:region' region.id %}">{{ region }}</a>
    {% endfor %}
    </ul>
  </div>
{% endif %}
</div>
<br/>

{% endblock %}

{% block scripts %}
<script src="{% static 'home/scripts/datatables.min.js' %}"></script>
<script>
$(document).ready(function(){
  $('#all_attrs').DataTable({
    "lengthChange": false,
    "dom": '<"pull-left"f>rt<"pull-left"p><"pull-right"i><"clear">',
  });
});
</script>
{% endblock %}
