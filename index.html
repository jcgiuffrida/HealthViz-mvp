<!DOCTYPE html>
<head>
  <script>
  var host = "lucaluca.github.io";
  if ((host == window.location.host) && (window.location.protocol != "https:"))
      window.location.protocol = "https";
  </script>
  <title>HealthyChi Viz: Social Determinants of Health in Chicago and Illinois</title>
  <link rel="stylesheet" href="bs/css/bootstrap-journal.min.css" />
  <link rel="stylesheet" href="style.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2-rc.1/css/select2.min.css" rel="stylesheet" />
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-60569315-1', 'auto');
  ga('send', 'pageview');
  </script>
  <link rel="canonical" href="{{ site.url }}{{ page.url }}" />
</head>
<body>
<div class="row">
  <div class="col-md-2 pull-left hc-logo">
    <a href="http://www.cityofchicago.org/city/en/depts/cdph/provdrs/healthychicago/svcs/healthy-chicago-2-0--community-health-assessment-and-improvement.html"><img src="healthy-chicago-logo.png" ></a>
  </div>
  <div class="col-md-6 col-md-offset-1">
    <h2>HealthyChi Viz
      <br/>
      <small>Social Determinants of Health in Chicago and Illinois</small>
    </h2>
  </div>
  <div class="col-md-3 pull-right">
    <h5>A project by <a href="https://lucaluca.github.io">Jonathan Giuffrida</a></h5>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <ul class="tabs">
      <li><a href="#" class="active">Community Area</a></li>
      <li><a href="#">Census Tract</a></li>
      <li><a href="#">ZIP Code</a></li>
    </ul>
  </div>
</div>
<div id="container">
  <div class="row">
    <div id="chart" class="col-md-8 col-xs-12">
      <div class="loading-div">Loading...</div>
      <div id="chartHeader" class="row">
        <div class="col-md-12 header-attributes">
          <div class="axis-header x">X</div>
          <div class="axis-header y">Y</div>
          <div class="axis-header size">Size</div>
        </div>
        <div class="col-md-12 header-attributes">
          <select class="x"></select>
          <select class="y"></select>
          <select class="size"></select>
        </div>
        <div class="rSquared col-md-12 text-center" data-original-title="">R-squared: 0.293</div>
      </div>
      <div class="tip" style="display: none;">
        <div class="ca row"></div>
        <div class="size row">
          <span class="name">label</span><br>
          <span class="value">value</span><span class="units">units</span>
        </div>
        <div class="x row">
          <span class="name">label</span><br>
          <span class="value">value</span><span class="units">units</span>
        </div>
        <div class="y row">
          <span class="name">label</span><br>
          <span class="value">value</span><span class="units">units</span>
        </div>
      </div>
      <div class="trendlineTip" style="display: none;">
        <div class="explanation row">
          On average, <span class="y name"></span> tends to <span class="y direction"></span> 
          by <span class="y value"></span> <span class="y units"></span> 
          for every <span class="x scale"></span> increase in <span class="x name"></span>.
        </div>
      </div>
    </div>
    <div class="col-md-4" id="error">
      <noscript>
  		 <p>To use this website, you will need to enable JavaScript.</p>
  		 <p>Please see these <a href="http://www.enable-javascript.com/" target="_blank">
  		 instructions for enabling JavaScript in your web browser</a>.</p>
  		</noscript>
    </div>
    <div class="col-md-4 col-xs-12">
      <form id="controls">
        <div class="small-instructions">
          Choose variables from below to put in the interactive scatterplot, and mouse over each bubble to see which <span class="geography-text">community area</span> it represents. You can start by clicking on "Examples" below. <a href="#instructions" id="show-instructions">Full instructions</a>
        </div>
        <div class="checkbox">
          <label>
            <input id="specialAreas" type="checkbox" checked="checked">
              Hide special areas (like universities and jails)
          </label>
        </div>
        <div class="checkbox">
          <label>
            <input id="smallAreas" type="checkbox">
              Hide areas with low population
          </label>
        </div>
        <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="examples">
              <h4 class="panel-title">
                <a data-toggle="collapse" href="#collapseExamples" aria-expanded="true" aria-controls="collapseExamples" class="">Examples</a>
              </h4>
            </div>
            <div id="collapseExamples" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingExamples" aria-expanded="true">
              <div class="list-group">
              </div>
            </div>
          </div>
        </div>
        <table id="attributes">

        </table>

      </form>

    </div>


  </div>
  <div class="row">
    <div class="col-md-2 col-md-offset-1 legend-dropdown">
      <select class="legend-select"></select>
    </div>
    <div class="col-md-4">
      <p>Bubbles are colored according to their primary <span class="legend-text">region</span>.</p>
    </div>
    <div class="col-md-2">
      <button class="btn btn-primary download">Download data</button>
    </div>
  </div>
  <div class="row">
    <div class="col-md-7 col-md-offset-1">
      <div id="legend" class="col-md-12">
      </div>
      <div class="col-md-10">
        <div class="panel-group" role="tablist" aria-multiselectable="true">
          <div class="panel panel-primary">
            <div class="panel-heading" role="tab">
              <h4 class="panel-title">
                <a data-toggle="collapse" href="#collapseGF" aria-expanded="true" aria-controls="collapseGF">Filter by Area</a>
              </h4>
            </div>
            <div id="collapseGF" class="panel-collapse" role="tabpanel" aria-labelledby="headingGF" aria-expanded="true">
              <div class="row">
                <div class="col-md-12" id="geofilters">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <a name="instructions"></a>
      <div class="col-md-12 instructions">
        <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="Instructions">
              <h4 class="panel-title">
                <a data-toggle="collapse" href="#collapseInstructions" aria-expanded="true" aria-controls="collapseInstructions" class="">Instructions</a>
              </h4>
            </div>
            <div id="collapseInstructions" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingInstructions" aria-expanded="true">
              <div class="panel-body">
                <b>This is an interactive scatterplot</b> to look at social determinants of health alongside various health outcomes in Chicago and Illinois. You can put any variables on the X and Y axes to look at their relationship by clicking <code>x</code> or <code>y</code> next to the variables you want in the list below. The size of the bubbles indicates a third variable, which you can change by clicking <code>size</code>. Mouse over the bubbles for more information and to identify which area a bubble represents. At first, this scatterplot shows how <code>Infant Mortality</code> increases in community areas that score highly on the <code>Hardship Index</code>, and the size of a bubble is proportional to the <code>Population</code> of that community area. You can also see summary statistics of the variables selected to the right. All health outcome variables are risk-adjusted for age.
                <br/>
                <br/>
                <b>It's important to remember</b> that this scatterplot shows relationships but not causal effects. Just because two variables show a clear trend does not mean that one causes the other: both could be caused by a third, hidden factor. We also recognize that it is difficult to draw broad conclusions about the health of residents by looking only at correlations between regions that represent vastly different populations and demographics. No community can be fully represented by a bubble on a graph. Even so, this tool can point us toward the right questions to investigate further.
                <br/>
                <br/>
                <b>Click an item in the legend</b> to focus on that region in the scatterplot. You can also switch between Chicago community areas and Illinois Census tracts using the tabs at the top.
                <br/>
                <br/>
                <b>Hover the mouse over a variable name</b> to view more details and the source of the data. As a disclaimer, this tool is still in development and is only intended for internal planning purposes. It is not an official City of Chicago application. All code is <a href="https://github.com/lucaluca/SDH">open-source</a>, meaning free to reuse or modify, and the visualization is by <a href="https://lucaluca.github.io">Jonathan Giuffrida</a>, based originally on <a href="http://bl.ocks.org/msbarry/9911363">this scatterplot</a> by Michael Barry.
                <br/>
                <br/><small>Version 0.4: February 2015</small>
                <br/>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4 statistics pull-right">
      <table>
        <thead>
          <tr>
            <td></td><td class="x"></td><td class="y"></td><td class="size"></td>
          </tr>
        </thead>
        <tbody>
          <tr class="mean">
            <td>Mean</td><td class="x"></td><td class="y"></td><td class="size"></td>
          </tr>
          <tr class="min">
            <td>Minimum</td><td class="x"></td><td class="y"></td><td class="size"></td>
          </tr>
          <tr class="25">
            <td>25%</td><td class="x"></td><td class="y"></td><td class="size"></td>
          </tr>
          <tr class="median">
            <td>Median</td><td class="x"></td><td class="y"></td><td class="size"></td>
          </tr>
          <tr class="75">
            <td>75%</td><td class="x"></td><td class="y"></td><td class="size"></td>
          </tr>
          <tr class="max">
            <td>Maximum</td><td class="x"></td><td class="y"></td><td class="size"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

<!--
  <defs>
    <filter id="f1" x="-40%" y="-40%" height="200%" width="200%">
      <feOffset result="offOut" in="SourceAlpha" dx="4" dy="4" />
      <feGaussianBlur result="blurOut" in="offOut" stdDeviation="8" />
      <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
    </filter>
  </defs>
  <circle r="30" cx="50" cy="50" style="stroke:gray; fill:aliceblue; stroke-width:3px" filter="url(#f1)" />
</svg>
-->

<script src="d3.min.js" charset="utf-8"></script>
<script src="jquery-1.11.2.min.js"></script>
<script src="bs/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2-rc.1/js/select2.min.js"></script>
<script src="js/papaparse.min.js"></script>
<script src="sdh.js"></script>
